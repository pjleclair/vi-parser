{"ast":null,"code":"import _defineProperty from\"/Users/Phillip/repos/vi-parser/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/Phillip/repos/vi-parser/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/Phillip/repos/vi-parser/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';//import './parser.css'; // Assuming you have a corresponding CSS file for styling\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Parser=function Parser(_ref){var onFileUpload=_ref.onFileUpload,jsonData=_ref.jsonData,onSaveConfiguration=_ref.onSaveConfiguration;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),columnMappings=_useState2[0],setColumnMappings=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),sampleData=_useState4[0],setSampleData=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),uploadMsg=_useState8[0],setUploadMsg=_useState8[1];useEffect(function(){if(jsonData&&jsonData.length>0){setSampleData(jsonData[0]);setColumnMappings(Object.keys(jsonData[0]).reduce(function(acc,key,index){acc[index]='';return acc;},{}));}},[jsonData]);useEffect(function(){if(uploadMsg!==\"\"){setTimeout(function(){setUploadMsg(\"\");},5000);}},[uploadMsg]);var handleColumnMapping=function handleColumnMapping(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setColumnMappings(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});};var handleInputChange=function handleInputChange(e){setName(e.target.value);};var saveConfiguration=function saveConfiguration(name,columnMappings){var configuration={name:name,columnMappings:_objectSpread({},columnMappings)};console.log(configuration);axios.post('/api/configurations',configuration).then(function(response){console.log('Configuration saved successfully:',response.data);setUploadMsg({msg:response.data.message,color:\"green\"});}).catch(function(error){console.error('Error saving configuration:',error);setUploadMsg({msg:error.response.data.error,color:\"red\"});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"parser\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:onFileUpload}),sampleData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"sample-data\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sample Data:\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:Object.keys(sampleData).map(function(key,index){return/*#__PURE__*/_jsx(\"th\",{children:key},index);})})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:Object.values(sampleData).map(function(value,index){return/*#__PURE__*/_jsx(\"td\",{children:value},index);})})})]})]}),sampleData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"column-mapping\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Column Mapping:\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Column\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Value\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.keys(sampleData).map(function(columnName,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:columnName}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{name:index,value:columnMappings[index],onChange:handleColumnMapping,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Value\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fullName\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"option\",{value:\"phoneNumber\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"option\",{value:\"emailAddress\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"option\",{value:\"party\",children:\"Party\"}),/*#__PURE__*/_jsx(\"option\",{value:\"age\",children:\"Age\"})]})})]},index);})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:handleInputChange,placeholder:\"Configuration Name\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return saveConfiguration(name,columnMappings);},children:\"Save Configuration\"}),uploadMsg&&/*#__PURE__*/_jsx(\"div\",{style:{color:uploadMsg.color,fontWeight:\"bolder\",marginTop:\"1rem\"},children:uploadMsg.msg})]})]});};export default Parser;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Parser","_ref","onFileUpload","jsonData","onSaveConfiguration","_useState","_useState2","_slicedToArray","columnMappings","setColumnMappings","_useState3","_useState4","sampleData","setSampleData","_useState5","_useState6","name","setName","_useState7","_useState8","uploadMsg","setUploadMsg","length","Object","keys","reduce","acc","key","index","setTimeout","handleColumnMapping","e","_e$target","target","value","prevState","_objectSpread","_defineProperty","handleInputChange","saveConfiguration","configuration","console","log","post","then","response","data","msg","message","color","catch","error","className","children","type","onChange","map","values","columnName","placeholder","onClick","style","fontWeight","marginTop"],"sources":["/Users/Phillip/repos/vi-parser/frontend/src/components/parser.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n//import './parser.css'; // Assuming you have a corresponding CSS file for styling\n\nconst Parser = ({ onFileUpload, jsonData, onSaveConfiguration }) => {\n  const [columnMappings, setColumnMappings] = useState({});\n  const [sampleData, setSampleData] = useState([]);\n  const [name, setName] = useState('');\n  const [uploadMsg, setUploadMsg] = useState({});\n\n  useEffect(() => {\n    if (jsonData && jsonData.length > 0) {\n      setSampleData(jsonData[0]);\n      setColumnMappings(\n        Object.keys(jsonData[0]).reduce((acc, key, index) => {\n          acc[index] = '';\n          return acc;\n        }, {})\n      );\n    }\n  }, [jsonData]);\n\n  useEffect(()=> {\n    if (uploadMsg !== \"\") {\n      setTimeout(() => {\n        setUploadMsg(\"\")\n      }, 5000);\n    }\n  },[uploadMsg])\n\n  const handleColumnMapping = (e) => {\n    const { name, value } = e.target;\n    setColumnMappings((prevState) => ({\n      ...prevState,\n      [name]: value,\n    }));\n  };\n\n  const handleInputChange = (e) => {\n    setName(e.target.value);\n  };\n\n  const saveConfiguration = (name,columnMappings) => {\n    const configuration = {\n      name,\n      columnMappings: {...columnMappings}\n    }\n    console.log(configuration)\n    axios.post('/api/configurations', configuration)\n      .then((response) => {\n        console.log('Configuration saved successfully:', response.data);\n        setUploadMsg({msg: response.data.message, color: \"green\"});\n      })\n      .catch((error) => {\n        console.error('Error saving configuration:', error);\n        setUploadMsg({msg: error.response.data.error, color: \"red\"});\n      });\n  };\n\n  return (\n    <div className=\"parser\">\n      <input type=\"file\" onChange={onFileUpload} />\n      {sampleData.length > 0 && (\n        <div className=\"sample-data\">\n          <h2>Sample Data:</h2>\n          <table>\n            <thead>\n              <tr>\n                {Object.keys(sampleData).map((key, index) => (\n                  <th key={index}>{key}</th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                {Object.values(sampleData).map((value, index) => (\n                  <td key={index}>{value}</td>\n                ))}\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      )}\n      {sampleData.length > 0 && (\n        <div className=\"column-mapping\">\n          <h2>Column Mapping:</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Column</th>\n                <th>Value</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.keys(sampleData).map((columnName, index) => (\n                <tr key={index}>\n                  <td>{columnName}</td>\n                  <td>\n                    <select\n                      name={index}\n                      value={columnMappings[index]}\n                      onChange={handleColumnMapping}\n                    >\n                      <option value=\"\">Select Value</option>\n                      <option value=\"fullName\">Full Name</option>\n                      <option value=\"phoneNumber\">Phone Number</option>\n                      <option value=\"emailAddress\">Email Address</option>\n                      <option value=\"party\">Party</option>\n                      <option value=\"age\">Age</option>\n                    </select>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          <input type=\"text\" value={name} onChange={handleInputChange} placeholder=\"Configuration Name\" />\n          <button onClick={() => saveConfiguration(name, columnMappings)}>\n            Save Configuration\n          </button>\n          {(uploadMsg) && (\n            <div style={{color: uploadMsg.color, fontWeight: \"bolder\", marginTop: \"1rem\"}}>{uploadMsg.msg}</div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Parser;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}